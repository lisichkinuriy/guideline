# Requests

- добавляем fake метод для тестирования
- заменяем строки на константы, т.к. они используются в нескольких местах приложения
- применяем VO


Плохой пример
```php
class LoginRequest extends BaseApiRequest
{
    public function rules(): array
    {
        return [
            'email' => ['required', 'exists:users'],
            'password' => ['required'],
        ];
    }
    
}
```

Хороший пример
```php
class LoginRequest extends BaseApiRequest
{
    const string EMAIL = 'email';
    const string PASSWORD = 'password';

    static public function fake(?Email $email = null, ?Password $password = null): array
    {
        if(null === $email) {
            $email = Email::fake();
        }

        if(null === $password) {
            $password = Password::fake();
        }

        return [
            self::EMAIL => $email->value,
            self::PASSWORD => $password->value
        ];
    }

    public function rules(): array
    {
        return [
            self::EMAIL => Email::requestValidators(['required']),
            self::PASSWORD => Password::requestValidators(['required']),
        ];
    }
}

```




Пример feature теста
```php

public function test_route() {
    $this->postJson(route(RouteName::LOGIN), LoginRequest::fake());
}

```