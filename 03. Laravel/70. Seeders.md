# Seeders

- сиды через DDD, значит мы соблюдём все необходимые constraints
- UnitOfWork через Dependency Container, значит можем сделать unit test, значит можем его подменить и получить на выходе текст SQL запроса

Плохой пример
```php
class DatabaseSeeder extends Seeder
{
    public function run(): void
    {
        DB::table('users')->insert([
            'name' => Str::random(10),
            'email' => Str::random(10).'@example.com',
            'password' => Hash::make('password'),
        ]);
    }
}
```

Хороший пример
```php
class DatabaseSeeder extends Seeder
{
    public function run(): void
    {
        $uow = app(IUnitOfWork::class);
        $user = User::register(UserName::fake(), UserEmail::fake(), UserPassword::of('password'));       
        $uow->add($user);
        $uow->commit();
    }
}
```

Пример юнит теста
```php
public function test_seeder()
{
    FakeUnitOfWork::bind();
    
    $seeder = new DatabaseSeeder();
    $seeder->run();

    $this->assertTrue(FakeUnitOfWork::isCommited());
}
```