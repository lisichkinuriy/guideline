# Seeders

- сидим через DDD, значит мы соблюдём все необходимые constraints
- сидим через unitOfWork, значит можем сделать unit test
- сидим через unitOfWork, значит можем его подменить и получить на выходе текст SQL запроса

Плохой пример
```php
class DatabaseSeeder extends Seeder
{
    public function run(): void
    {
        DB::table('users')->insert([
            'name' => Str::random(10),
            'email' => Str::random(10).'@example.com',
            'password' => Hash::make('password'),
        ]);
    }
}
```

Хороший пример
```php
class RefreshSeeder extends Seeder
{
    public function run(): void
    {
        $uow = app(IUnitOfWork::class);

        $employer = EmployerName::seedEmployer();
        $settings = CommissionSettings::createForEmployer($employer, CommissionConditions::fake(), true);
        $uow->add($settings);

        $common_settings = CommissionSettings::createForEmployer(EmployerName::common(), CommissionConditions::fake(), true);
        $uow->add($common_settings);

        $agent = Agent::new(AgentID::seed());
        $agent->setProcessingId(ProcessingReceiverID::sandboxSuccess());
        $uow->add($agent);

        $employee = Employee::new(GatewayEmployeeID::testEmployee());
        $uow->add($employee);

        $uow->commit();
    }
}
```

Пример юнит теста
```php
public function test_seeder()
{
    FakeUnitOfWork::bind();
    
    $seeder = new RefreshSeeder();
    $seeder->run();

    $this->assertTrue(FakeUnitOfWork::isSaved());
}
```