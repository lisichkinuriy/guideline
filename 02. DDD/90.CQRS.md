# CQRS - Command Query Responsibility Segregation


Command - внесение изменений с соблюдением целостности данных.

Query - выборка из базы данных

Они имеют принципиально разную природу.  
Поэтому не надо усложнять код и без необходимости тянуть DDD практики в выборку данных.

Например, для выборки моделек по фильтру делаем не Action, а Query, который напрямую работает с базой

```php
class SenderListQuery
{
    public function execute(SenderListDTO $dto): ActionResultDTO
    {
        $query = Sender::query();

        if (! is_null($dto->currency)) {
            $query->where('currency', $dto->currency);
        }

        if (! is_null($dto->serviceType)) {
            $query->where('service', $dto->serviceType);
        }

        $senders = $query->get();

        return ActionResultDTO::success($senders);
    }

    public function getResultSenders(ActionResultDTO $result): Collection
    {
        return $result->result;
    }
}

```

